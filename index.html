<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Phần mềm đánh giá phát âm tiếng anh</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  </head>
  <body class="container">
    <div class="col-md-12">
      <h2>Phần mềm đánh giá phát âm tiếng anh</h2>
      <br/>

      Nhập vào câu tiếng anh: 
      <br/>
      <input type="text" id="sentence" class="form-control" onchange="convertPhonemes()">
      <br/>
      Cách đọc theo từ điển
      <br/>
      <input class="form-control" type="text" id="ipa-out-dict" readonly></input>
      <br/>
      Cách đọc theo phiên âm tiếng Việt
      <br/>
      <input class="form-control" type="text" id="ipa-out" readonly></input>
      <br/>
      
      <button id="recordButton" class="btn btn-info">Bắt đầu nói <i class="fa fa-microphone"></i></button>
      <button onclick="listen();" class="btn btn-success">Nghe giọng đọc mẫu <i class="fa fa-headphones"></i></button>
      <br/>
      <br/>
      Giọng đọc của bạn:
      <br/>
      <audio controls="controls" src="" id="audioPlayer">Audio tag not supported in your web browser</audio>

      <div id="ipa-err" style="display: none;">
          <p>Errors will go here if you make any. (This will be overwritten!)</p>
      </div>
      
    </div>

    <script src="text-to-ipa-min.js"></script>
    <script src="converter-form-min.js"></script>    
    <script src="text-to-ipa-dict.js"></script>
    <script src="converter-form-dict.js"></script>

    
    <script type="text/javascript">
 

    function errorModal(error){
      var map_error = {}
      map_error["INVALID_SENTENCE"] = "Vui lòng nhập đúng nội dung tiếng anh"
      map_error["NO_AUDIO"] = "Âm thanh quá ngắn hoặc sai định dạng"
      swal({
        type: 'error',
        title: 'Cảnh báo...',
        text: map_error[error],
      })
    };


    window.onload = TextToIPA.loadDict('./ipadict2.txt');

    window.onload = TextToIPADict.loadDict('./ipadict.txt');
    

    // Convert to phonemes

    function convertPhonemes() {
      ConverterForm.convert('sentence', 'ipa-out', 'ipa-err');
      ConverterFormDict.convert('sentence', 'ipa-out-dict', 'ipa-err');
    }

    function listen(){
      var msg = new SpeechSynthesisUtterance($("#sentence").val());
      window.speechSynthesis.speak(msg);
    };


    </script>

    
    <script src="https://cdn.rawgit.com/mattdiamond/Recorderjs/08e7abd9/dist/recorder.js"></script>
    <script src="jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.28.10/dist/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="app.js"></script>

  </body>
</html>
